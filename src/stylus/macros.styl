/******************************************************************************\

                  This file is part of the Buildbotics firmware.

         Copyright (c) 2015 - 2023, Buildbotics LLC, All rights reserved.

          This Source describes Open Hardware and is licensed under the
                                  CERN-OHL-S v2.

          You may redistribute and modify this Source and make products
     using it under the terms of the CERN-OHL-S v2 (https:/cern.ch/cern-ohl).
            This Source is distributed WITHOUT ANY EXPRESS OR IMPLIED
     WARRANTY, INCLUDING OF MERCHANTABILITY, SATISFACTORY QUALITY AND FITNESS
      FOR A PARTICULAR PURPOSE. Please see the CERN-OHL-S v2 for applicable
                                   conditions.

                 Source location: https://github.com/buildbotics

       As per CERN-OHL-S v2 section 4, should You produce hardware based on
     these sources, You must maintain the Source Location clearly visible on
     the external case of the CNC Controller or other product you make using
                                   this Source.

                 For more information, email info@buildbotics.com

\******************************************************************************/

// =====================================================
// SETTINGS PAGE - Macro Configuration
// =====================================================

#settings-macros
  h2
    margin-top 1.5em
    margin-bottom 0.5em
    border-bottom 1px solid #ddd
    padding-bottom 0.25em

  .redirect-notice
    background #d9edf7
    border 1px solid #bce8f1
    border-radius 4px
    padding 1em
    margin 1em 0
    display flex
    align-items center
    
    .fa
      font-size 1.5em
      color #31708f
      margin-right 0.75em
    
    p
      margin 0
      color #31708f
      
    a
      color #245269
      font-weight bold

  .help-text
    color #666
    font-size 0.9em
    margin 0.5em 0

  .toolbar
    text-align right
    margin 0.5em 0

    .fa
      margin-right 0.25em

    button
      margin-left 0.5em

  .tab-toolbar
    margin-bottom 0.5em

  // Tab list styling
  .tab-list
    border 1px inset #ccc
    padding 0.5em
    margin 0.5em 0
    list-style none

    li
      display flex
      align-items center
      background #f5f5f5
      margin 2px 0
      padding 4px

      &:hover
        background #eee

    .tab-name
      flex 1
      border 1px solid #ccc
      padding 4px 8px
      margin 0 8px
      font-size 1em

    .tab-macro-count
      color #666
      font-size 0.85em
      padding 0 1em
      white-space nowrap

    .actions
      .fa
        margin 0 4px
        cursor pointer
        color #666

        &:hover
          color #333

        &.disabled
          opacity 0.3
          cursor not-allowed

    .grip
      content '....'
      width 10px
      height 24px
      display inline-block
      overflow hidden
      line-height 5px
      padding 3px 4px
      cursor move
      vertical-align middle
      font-size 12px
      font-family sans-serif
      letter-spacing 2px
      color #cccccc
      text-shadow 1px 0 1px black
      white-space normal

    .grip:after
      content '.. .. .. ..'

  // Macro list styling
  .macros
    border 1px inset #ccc
    padding 0.5em
    margin 0.5em 0

    li
      display flex
      align-items center

      &.header
        font-weight bold
        padding 4px
        border-bottom 1px solid #ccc
        margin-bottom 4px

        .index
          width 2em

        .visibility
          width 2.5em
          text-align center

          .fa
            color #666

        .confirm-header
          width 2.5em
          text-align center

          .fa
            color #f0ad4e

        .tab-header
          width 8em
          padding-left 0.5em

        .macro-header
          flex 1
          padding-left 0.5em

    .index
      padding 4px
      width 2em
      font-weight bold

    .visibility-toggle
      width 2em
      margin 0 0.25em
      cursor pointer

    .confirm-toggle
      width 2em
      margin 0 0.25em
      cursor pointer

    .tab-select
      width 8em
      margin 0 0.25em
      padding 2px 4px
      border 1px solid #ccc
      background #fff

    label
      font-weight bold

    .macro
      display flex
      width auto
      flex 1
      align-items center
      background #eee
      margin 2px 0
      white-space nowrap
      user-select none

      > *
        margin 2px

      input
        border 0
        line-height 1.75em
        padding 0 4px
        user-select normal

      .name
        width 6em

      .path
        flex 1
        background #fff
        cursor pointer

        &::placeholder
          color #999
          font-style italic

      .actions
        display inline-block

        .fa
          margin 0 4px
          cursor pointer

          &:hover
            opacity 0.8

      .grip
        content '....'
        width 10px
        height 24px
        display inline-block
        overflow hidden
        line-height 5px
        padding 3px 4px
        cursor move
        vertical-align middle
        font-size 12px
        font-family sans-serif
        letter-spacing 2px
        color #cccccc
        text-shadow 1px 0 1px black
        white-space normal

      .grip:after
        content '.. .. .. ..'


  .no-macros
    color #666
    font-style italic
    padding 1em
    text-align center

// =====================================================
// CONTROL PAGE - Macro Display
// =====================================================

.macros-container
  margin 0.25em 0  // Reduced for tighter layout

  // Macro tab bar - always visible
  .macro-tabs
    display flex
    flex-wrap wrap
    margin-bottom 0
    border-bottom 2px solid #ddd

    .macro-tab
      padding 0.3em 0.75em  // Reduced padding for compactness
      cursor pointer
      background #eee
      border-top-left-radius 4px
      border-top-right-radius 4px
      margin-right 2px
      margin-bottom -2px
      border 1px solid transparent
      border-bottom none
      font-weight 500
      font-size 0.9em
      white-space nowrap
      transition background 0.15s ease
      text-decoration none
      color #333

      &:hover
        background #f5f5f5

      &.active
        background #fff
        border-color #ddd
        border-bottom 2px solid #fff
        margin-bottom -2px

    // Settings tab - styled differently
    .settings-tab
      margin-left auto
      background #f8f8f8
      color #666
      
      .fa
        margin-right 0.25em
      
      &:hover
        background #e8e8e8
        color #333

  // Macro buttons container
  .macros
    display flex
    flex-wrap wrap
    padding 0.5em
    background #fff
    border 1px solid #ddd
    border-top none
    min-height 2.5em

    .macro
      margin 3px
      padding 0.4em 0.75em
