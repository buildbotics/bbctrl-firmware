/******************************************************************************\

                  This file is part of the Buildbotics firmware.

         Copyright (c) 2015 - 2023, Buildbotics LLC, All rights reserved.

          This Source describes Open Hardware and is licensed under the
                                  CERN-OHL-S v2.

          You may redistribute and modify this Source and make products
     using it under the terms of the CERN-OHL-S v2 (https:/cern.ch/cern-ohl).
            This Source is distributed WITHOUT ANY EXPRESS OR IMPLIED
     WARRANTY, INCLUDING OF MERCHANTABILITY, SATISFACTORY QUALITY AND FITNESS
      FOR A PARTICULAR PURPOSE. Please see the CERN-OHL-S v2 for applicable
                                   conditions.

                 Source location: https://github.com/buildbotics

       As per CERN-OHL-S v2 section 4, should You produce hardware based on
     these sources, You must maintain the Source Location clearly visible on
     the external case of the CNC Controller or other product you make using
                                   this Source.

                 For more information, email info@buildbotics.com

\******************************************************************************/

// Service View Styles
// Uses existing Buildbotics variables and patterns

.service-view
  padding: 0

  // Navigation bar
  .navbar
    display: flex
    align-items: center
    background: #f5f5f5
    border-bottom: 1px solid #ddd
    padding: 0.5em 1em

    .nav-item
      padding: 0.5em 1em
      text-decoration: none
      color: #333
      border-radius: 4px
      margin-right: 0.25em
      
      &:hover
        background: #e8e8e8
      
      &.active, &:target
        background: #fff
        border: 1px solid #ddd
        border-bottom-color: #fff
        margin-bottom: -1px

    .spacer
      flex: 1

    .actions
      display: flex
      align-items: center
      gap: 0.5em
      
      button
        margin-left: 0.25em
    
    .save-status
      display: flex
      align-items: center
      color: #5cb85c
      font-size: 0.9em
      padding: 0.25em 0.5em
      
      .fa
        margin-right: 0.35em

  // Hours summary bar - matches info-blocks style
  .hours-bar
    display: flex
    justify-content: center
    gap: 20px
    padding: 15px
    background: #f5f5f5
    border-bottom: 1px solid #ddd
    margin-bottom: 20px

    .hours-item
      text-align: center
      padding: 10px 20px
      background: white
      border-radius: 4px
      border: 1px solid #ddd
      min-width: 120px

      .hours-label
        font-size: 12px
        color: #666
        text-transform: uppercase
        margin-bottom: 5px

      .hours-value
        font-size: 24px
        font-weight: bold
        color: #333


  // Main content area
  .service-content
    padding: 0 20px 20px

    h2
      margin: 0 0 20px 0
      color: #333

    h3
      margin: 20px 0 15px 0
      color: #555


  // Section header with button
  .section-header-row
    display: flex
    justify-content: space-between
    align-items: center
    margin-bottom: 20px

    h2
      margin: 0


  // Due items warning section
  .due-items-section
    background: #fff3cd
    border: 2px solid #ffc107
    border-radius: 4px
    padding: 15px
    margin-bottom: 20px

    .section-header
      display: flex
      align-items: center
      font-size: 18px
      font-weight: bold
      color: #856404
      margin-bottom: 15px

      .fa
        margin-right: 10px
        font-size: 20px

    .due-items-list
      .due-item
        display: flex
        align-items: center
        padding: 12px
        background: white
        border-radius: 4px
        margin-bottom: 8px
        border: 1px solid #ffc107

        &:last-child
          margin-bottom: 0

        .item-color
          width: 24px
          height: 24px
          border-radius: 4px
          margin-right: 12px
          border: 1px solid rgba(0,0,0,0.1)

        .item-info
          flex: 1

          .item-label
            font-weight: bold
            margin-bottom: 3px

          .item-details
            font-size: 13px
            color: #666

            .hour-type
              margin-right: 10px

            .overdue
              color: #d32f2f
              font-weight: bold

        .item-actions
          margin-left: 10px
          
          button, .pure-button
            padding: 4px 10px
            font-size: 13px


  // No due items message
  .no-due-items
    display: flex
    align-items: center
    justify-content: center
    padding: 30px
    background: #e8f5e9
    border-radius: 4px
    color: #2e7d32
    font-size: 18px
    margin-bottom: 20px

    .fa
      font-size: 24px
      margin-right: 10px


  // Stats section
  .stats-section
    margin-bottom: 20px

    .stats-grid
      display: flex
      gap: 15px

      .stat-card
        flex: 1
        background: white
        border: 1px solid #ddd
        border-radius: 4px
        padding: 20px
        text-align: center

        .stat-value
          font-size: 32px
          font-weight: bold
          color: #333

        .stat-label
          font-size: 14px
          color: #666
          margin-top: 5px


  // Upcoming list
  .upcoming-list
    .upcoming-item
      display: flex
      align-items: center
      padding: 12px
      background: white
      border: 1px solid #ddd
      border-radius: 4px
      margin-bottom: 8px

      &.due
        border-color: #ff5722
        background: #fff3f0

      .item-color
        width: 20px
        height: 20px
        border-radius: 3px
        margin-right: 12px
        border: 1px solid rgba(0,0,0,0.1)

      .item-info
        display: flex
        align-items: baseline
        gap: 10px

        .item-label
          font-weight: 500

        .item-remaining
          font-size: 14px
          color: #666
          padding: 2px 8px
          background: #f0f0f0
          border-radius: 10px

          &.overdue
            color: #d32f2f
            font-weight: bold
            background: #ffebee

      .item-interval
        margin-left: auto
        font-size: 13px
        color: #999


  // Items list
  .items-list
    .item-card
      background: white
      border: 1px solid #ddd
      border-radius: 4px
      margin-bottom: 12px
      display: flex
      align-items: center
      overflow: hidden

      &.due
        border-color: #ff5722

        .item-color-bar
          background: #ff5722 !important

      .item-color-bar
        width: 8px
        align-self: stretch
        flex-shrink: 0

      .item-content
        flex: 1
        padding: 15px
        min-width: 0

        .item-header
          display: flex
          align-items: center
          gap: 12px
          margin-bottom: 10px

          .item-label
            font-size: 16px
            font-weight: bold

          .item-status
            font-size: 14px
            color: #666
            padding: 4px 10px
            background: #e8f5e9
            border-radius: 12px
            white-space: nowrap

            &.overdue
              background: #ffebee
              color: #d32f2f
              font-weight: bold

        .item-details
          display: flex
          flex-wrap: wrap
          gap: 15px

          .detail
            font-size: 14px

            .detail-label
              color: #666
              margin-right: 5px

            .detail-value
              color: #333

      .item-actions
        display: flex
        flex-direction: column
        gap: 6px
        padding: 15px
        border-left: 1px solid #eee
        
        button, .pure-button
          padding: 6px 12px
          font-size: 13px
          white-space: nowrap


  // Notes list
  .notes-list
    .note-card
      background: white
      border: 1px solid #ddd
      border-radius: 4px
      padding: 15px
      margin-bottom: 12px

      .note-header
        display: flex
        justify-content: space-between
        align-items: center
        margin-bottom: 10px

        .note-title
          font-size: 16px
          font-weight: bold

        .note-date
          font-size: 12px
          color: #999

      .note-content
        white-space: pre-wrap
        color: #333
        line-height: 1.6
        margin-bottom: 12px
        padding: 10px
        background: #f9f9f9
        border-radius: 4px
        font-family: inherit

      .note-actions
        display: flex
        gap: 8px
        
        // Make buttons in action areas smaller
        button, .pure-button
          padding: 4px 10px
          font-size: 13px


  // Editor panel
  .editor-panel
    background: #f5f5f5
    border: 1px solid #ddd
    border-radius: 4px
    padding: 20px
    margin-top: 20px

    h3
      margin: 0 0 20px 0

    .form-row
      display: flex
      gap: 15px
      margin-bottom: 15px
      
      .form-group
        flex: 1
        min-width: 0  // Prevent flex items from overflowing
      
      .form-group-flex
        flex: 2
      
      .form-group-small
        flex: 0 0 150px

    .form-group
      margin-bottom: 15px

      label
        display: block
        font-weight: 500
        margin-bottom: 5px
        color: #333

      input, textarea, select
        width: 100%
        padding: 8px 12px
        border: 1px solid #ddd
        border-radius: 4px
        font-size: 14px
        font-family: inherit
        box-sizing: border-box  // Ensure padding doesn't cause overflow

        &:focus
          outline: none
          border-color: #2196F3

      input[type="number"]
        -moz-appearance: textfield
        
        &::-webkit-inner-spin-button,
        &::-webkit-outer-spin-button
          opacity: 1

      textarea
        resize: vertical
        min-height: 150px

      select
        background: white

    .editor-actions
      display: flex
      justify-content: flex-end
      gap: 10px
      margin-top: 20px
      padding-top: 15px
      border-top: 1px solid #ddd


  // Empty message
  .empty-message
    color: #666
    font-style: italic
    padding: 20px
    text-align: center
    background: #f9f9f9
    border-radius: 4px


// Control page service warning
.service-warning-banner
  display: flex
  align-items: center
  background: #fff3cd
  border: 2px solid #ffc107
  border-radius: 4px
  padding: 10px 15px
  margin: 10px 0
  cursor: pointer

  &:hover
    background: #ffecb3

  .fa
    color: #f57c00
    font-size: 18px
    margin-right: 10px

  .warning-text
    flex: 1
    color: #856404
    font-weight: 500

  .warning-count
    background: #f57c00
    color: white
    padding: 2px 8px
    border-radius: 10px
    font-size: 13px
    font-weight: bold
    margin-left: 10px
